System.register("chunks:///downloadHandle.js",[],(function(){"use strict";const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(var t=0;t<64;t++)n[e.charCodeAt(t)]=t;function a(e){var t,a,s,r,o,i=.75*e.length,c=e.length,d=0;"="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--);const l=new ArrayBuffer(i),u=new Uint8Array(l);for(t=0;t<c;t+=4)a=n[e.charCodeAt(t)],s=n[e.charCodeAt(t+1)],r=n[e.charCodeAt(t+2)],o=n[e.charCodeAt(t+3)],u[d++]=a<<2|s>>4,u[d++]=(15&s)<<4|r>>2,u[d++]=(3&r)<<6|63&o;return l}function s(e,n,t){var a;if(null==t||null==(a=t.res))return e[n];var s=a[n]||n;if("gameConfig_json"==n){var r=t.param;return e[n][r]}return e[s]}const r=["json","text","_skeletonJson","_dragonBonesJson","_atlasJson"],o=[!0,!1,!0,!1,!0];function i(e,n,t){var a=window.metaDatasMap[e];if(null==a)return n;var s,i=JSON.parse(a),c=i[3][0][1].findIndex((e=>-1!=(s=r.indexOf(e))))+1;return i[5][0][c]=o[s]?n:JSON.stringify(n),t?i:JSON.stringify(i)}function c(e,n,t){var a=document,s=document.createElement("script");s.type="text/javascript",s.charset="utf-8",s.setAttribute("type","text/javascript"),s.text=window.assetsMap[e],a.body.appendChild(s),t(null)}function d(e,n,t){var a=window.assetsMap[e];t(null,a=i(e,JSON.parse(a),!0))}function l(e,n,t){t(null,window.assetsMap[e])}function u(e,n,t){t(null,a(window.assetsMap[e]))}function w(e,n,t){var a;if(null!=e&&null!=window.picDesc&&null!=(a=window.picDesc[e])){var s=a.split(","),r=parseInt(s[0]),o=parseInt(s[1]);if(n.width!=r||n.height!=o)return function(e,n,t,a){var s=document.createElement("canvas"),r=s.getContext("2d");s.width=n,s.height=t,r.drawImage(e,0,0,n,t),e.src=s.toDataURL("image/png"),e.addEventListener("load",(function n(){e.removeEventListener("load",n),a(null,e)}))}(n,r,o,t)}t(null,n)}function f(e,n,t){var a=window.assetsMap[e],s=new Image;function r(){s.removeEventListener("load",r),s.removeEventListener("error",o),w(window.assetsKeyMap[e],s,t)}function o(){s.removeEventListener("load",r),s.removeEventListener("error",o),t(new Error("Load image ("+e+") failed"))}if(s.addEventListener("load",r),s.addEventListener("error",o),a.startsWith("data:image/"))s.src=a;else{var i=e.slice(e.lastIndexOf(".")+1);s.src=`data:image/${i};base64,${a}`}}const p=/^(?:\w+:\/\/|\.+\/).+/,v={".png":f,".jpg":f,".jpeg":f,".webp":f,".txt":l,".xml":l,".vsh":l,".fsh":l,".atlas":l,".tmx":l,".tsx":l,".json":d,".ExportJson":d,".plist":l,".fnt":l,".ttf":function(e,n,t){let a=function(e){const n=e.lastIndexOf(".ttf");if(-1===n)return e;const t=e.lastIndexOf("/");let a;return a=-1===t?`${e.substring(0,n)}_LABEL`:`${e.substring(t+1,n)}_LABEL`,-1!==a.indexOf(" ")&&(a=`"${a}"`),a}(e),s='url(data:application/x-font-woff;charset=utf-8;base64,PASTE-BASE64-HERE) format("woff")';s=s.replace("PASTE-BASE64-HERE",window.assetsMap[e]);let r=new FontFace(a,s);document.fonts.add(r),r.load(),r.loaded.then((function(){t(null,a)}),(function(){cc.warnID(4933,a),t(null,a)}))},".binary":u,".bin":u,".dbbin":u,".skel":u,".cconb":function(e,n,t){var s=window.assetsMap[e];t(null,cc.internal.decodeCCONBinary(new Uint8Array(a(s))))},".mp3":function(e,n,t){var s=window.assetsMap[e];if(null==s)throw"load url falied: "+window.assetsKeyMap[e];t(null,a(s))},".mp4":function(e,n,t){var s=window.assetsMap[e];const r=document.createElement("video"),o=document.createElement("source");r.appendChild(o);var i=new Blob([a(s)],{type:"video/mp4"});o.src=URL.createObjectURL(i),t(null,r)},".js":c,bundle:(e,n,t)=>{const a=cc.path.basename(e);var s=e;p.test(s)||(s=-1!==cc.assetManager.downloader.remoteBundles.indexOf(a)?`${cc.assetManager.downloader.remoteServerAddress}remote/${a}`:`assets/${a}`);const r=n.version||cc.assetManager.downloader.bundleVers[a];var o=0;var i=null,l=null;d(`${s}/config.${r?`${r}.`:""}json`,0,((e,n)=>{l=e,(i=n)&&(i.base=`${s}/`),2==++o&&t(l,i)}));c(`${s}/index.${r?`${r}.`:""}js`,0,(e=>{l=e,2==++o&&t(e,i)}))},default:l};if(null!=window.assetsPackage){var g=function(e){var n=function(){var e=new RegExp("(^|&)"+"dco_gid"+"=([^&]*)(&|$)","i"),n=window.location.search.substr(1).match(e);if(n)return n[2]}();window.HttpAPI&&window.HttpAPI.sendPoint("dco&cls="+n);var t=e.dco_config_json;return null==t?null:t[n]||t[Object.keys(t)[0]]}(window.assetsPackage);for(var m of Object.keys(window.assetsKeyMap))window.assetsMap[m]=s(window.assetsPackage,window.assetsKeyMap[m],g)}else{var h={};cc.assetManager.downloader.register(".mp3",((e,n,t)=>{n.xhrResponseType="arraybuffer",cc.assetManager.downloader.downloadFile(e,n,n.onFileProgress,t)})),cc.assetManager.downloader.register(".mp4",((e,n,t)=>{n.xhrResponseType="blob",cc.assetManager.downloader.downloadFile(e,n,n.onFileProgress,((e,n)=>{if(e)return t(e,n);const a=document.createElement("video"),s=document.createElement("source");a.appendChild(s),s.src=URL.createObjectURL(n),t(null,a)}))})),cc.assetManager.downloader.register(".json",((e,n,t)=>{n.xhrResponseType="json",cc.assetManager.downloader.downloadFile(e,n,n.onFileProgress,(function(n,a){a=i(h[e],a,!0),t(n,a)}))}));var y=Object.assign({},cc.assetManager.downloader._downloaders);const e=function(e,n,t,a,s){null!=window.assetsKeyMap[t]?(h[window.assetsKeyMap[t]]=t,e(window.assetsKeyMap[t],a,s)):n(t,a,s)};for(var M of Object.keys(v)){let n=v[M],t=y[M];v[M]=function(...a){return e(t,n,...a)}}}if(cc.assetManager.downloader.register(v),null!=window.wasmMap){const e=window.URL;window.URL=class{href;constructor(e,n){this.href=e}static createObjectURL(n){return e.createObjectURL(n)}};const n=window.fetch;window.fetch=function(...e){const t=e[0],s=window.wasmMap[t];return null!=s?Promise.resolve(new class{arrayBuffer(){const e=new Uint8Array(a(s));return Promise.resolve(e)}}):n(...e)}}return{setters:[function(e){}],execute:function(){}}}));