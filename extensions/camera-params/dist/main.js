"use strict";var t=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.unload=exports.load=exports.methods=void 0;const e=t(require("fs")),r=t(require("path"));let a,o={};async function s(){if(a=await Editor.Profile.getConfig("playable-config","cameraConfigPath"),null==a||""==a)return console.warn("get cameraConfigPath failed!",a);const t="project://";a.startsWith(t)&&(a=a.substring(10)),function(t){const r=Editor.Utils.Path.join(Editor.Project.path,t);if(!e.default.existsSync(r))return;let a=e.default.readFileSync(r,{encoding:"utf8"});try{o=JSON.parse(a)}catch(t){return console.warn(t)}console.log("cameraConfigData",t,o)}(a)}exports.methods={getConfigData:()=>o,setConfigData(t){o=t,function(t,a){const o=Editor.Utils.Path.join(Editor.Project.path,t);e.default.mkdirSync(r.default.dirname(o),{recursive:!0}),e.default.writeFileSync(o,JSON.stringify(a),{encoding:"utf8"}),Editor.Message.request("asset-db","refresh-asset",o)}(a,o),Editor.Message.send("asset-db","reimport-asset",r.default.join(Editor.Project.path,a))}},exports.load=async function(){await Editor.Message.request("asset-db","query-ready")?s():Editor.Message.addBroadcastListener("asset-db:ready",s)},exports.unload=function(){};